const data1 = [
  {
    program: "Sport",
    university: "ĐH Văn Lang",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Math",
    university: "ĐH Lạc Hồng",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Physical",
    university: "ĐH Thủy Lợi",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Chemistry",
    university: "ĐH Bách Khoa",
    year: 2024,
    resolution: "@NQ/0001",
  },
  {
    program: "Biology",
    university: "ĐH Sư Phạm",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "English",
    university: "ĐH Ngoại Ngữ",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "IT",
    university: "ĐH CNTT",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "History",
    university: "ĐH KHXHNV",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Design",
    university: "ĐH Mỹ Thuật",
    year: 2025,
    resolution: "@NQ/00091",
  },
  {
    program: "Sport",
    university: "ĐH Văn Lang",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Math",
    university: "ĐH Lạc Hồng",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Physical",
    university: "ĐH Thủy Lợi",
    year: 2025,
    resolution: "@NQ/00031",
  },
  {
    program: "Chemistry",
    university: "ĐH Bách Khoa",
    year: 2024,
    resolution: "@NQ/0001",
  },
  {
    program: "Biology",
    university: "ĐH Sư Phạm",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "English",
    university: "ĐH Ngoại Ngữ",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "IT",
    university: "ĐH CNTT",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "History",
    university: "ĐH KHXHNV",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Design",
    university: "ĐH Mỹ Thuật",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Sport",
    university: "ĐH Văn Lang",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Math",
    university: "ĐH Lạc Hồng",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Physical",
    university: "ĐH Thủy Lợi",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Chemistry",
    university: "ĐH Bách Khoa",
    year: 2024,
    resolution: "@NQ/0001",
  },
  {
    program: "Biology",
    university: "ĐH Sư Phạm",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "English",
    university: "ĐH Ngoại Ngữ",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "IT",
    university: "ĐH CNTT",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "History",
    university: "ĐH KHXHNV",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Design",
    university: "ĐH Mỹ Thuật",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Sport",
    university: "ĐH Văn Lang",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Math",
    university: "ĐH Lạc Hồng",
    year: 2025,
    resolution: "@NQ/00021",
  },
  {
    program: "Physical",
    university: "ĐH Thủy Lợi",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Chemistry",
    university: "ĐH Bách Khoa",
    year: 2024,
    resolution: "@NQ/0001",
  },
  {
    program: "Biology",
    university: "ĐH Sư Phạm",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "English",
    university: "ĐH Ngoại Ngữ",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "IT",
    university: "ĐH CNTT",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "History",
    university: "ĐH KHXHNV",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Design",
    university: "ĐH Mỹ Thuật",
    year: 2025,
    resolution: "@NQ/0001",
  },
];

const data2 = [
  {
    program: "Sport",
    university: "ĐH Văn Lang",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Math",
    university: "ĐH Lạc Hồng",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Physical",
    university: "ĐH Thủy Lợi",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Chemistry",
    university: "ĐH Bách Khoa",
    year: 2024,
    resolution: "@NQ/0001",
  },
  {
    program: "Biology",
    university: "ĐH Sư Phạm",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "English",
    university: "ĐH Ngoại Ngữ",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "IT",
    university: "ĐH CNTT",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "History",
    university: "ĐH KHXHNV",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Design",
    university: "ĐH Mỹ Thuật",
    year: 2025,
    resolution: "@NQ/00091",
  },
  {
    program: "Sport",
    university: "ĐH Văn Lang",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Math",
    university: "ĐH Lạc Hồng",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Physical",
    university: "ĐH Thủy Lợi",
    year: 2025,
    resolution: "@NQ/00031",
  },
  {
    program: "Chemistry",
    university: "ĐH Bách Khoa",
    year: 2024,
    resolution: "@NQ/0001",
  },
  {
    program: "Biology",
    university: "ĐH Sư Phạm",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "English",
    university: "ĐH Ngoại Ngữ",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "IT",
    university: "ĐH CNTT",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "History",
    university: "ĐH KHXHNV",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Design",
    university: "ĐH Mỹ Thuật",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Sport",
    university: "ĐH Văn Lang",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Math",
    university: "ĐH Lạc Hồng",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Physical",
    university: "ĐH Thủy Lợi",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Chemistry",
    university: "ĐH Bách Khoa",
    year: 2024,
    resolution: "@NQ/0001",
  },
  {
    program: "Biology",
    university: "ĐH Sư Phạm",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "English",
    university: "ĐH Ngoại Ngữ",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "IT",
    university: "ĐH CNTT",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "History",
    university: "ĐH KHXHNV",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Design",
    university: "ĐH Mỹ Thuật",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Sport",
    university: "ĐH Văn Lang",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Math",
    university: "ĐH Lạc Hồng",
    year: 2025,
    resolution: "@NQ/00021",
  },
  {
    program: "Physical",
    university: "ĐH Thủy Lợi",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Chemistry",
    university: "ĐH Bách Khoa",
    year: 2024,
    resolution: "@NQ/0001",
  },
  {
    program: "Biology",
    university: "ĐH Sư Phạm",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "English",
    university: "ĐH Ngoại Ngữ",
    year: 2023,
    resolution: "@NQ/0001",
  },
  {
    program: "IT",
    university: "ĐH CNTT",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "History",
    university: "ĐH KHXHNV",
    year: 2025,
    resolution: "@NQ/0001",
  },
  {
    program: "Design2",
    university: "ĐH Mỹ Thuật",
    year: 2025,
    resolution: "@NQ/0001",
  },
];

const rowsPerPage1 = 9;
let currentPage1 = 1;

const rowsPerPage2 = 9;
let currentPage2 = 1;

function renderTable(tableId, data, page, rowsPerPage) {
  const tbody = document.querySelector(`#${tableId} tbody`);
  tbody.innerHTML = "";

  const start = (page - 1) * rowsPerPage;
  const end = start + rowsPerPage;
  const pageItems = data.slice(start, end);

  for (let item of pageItems) {
    const row = `
        <tr>
          <td>${item.program}</td>
          <td>${item.university}</td>
          <td class="w-small">${item.year}</td>
          <td>${item.resolution}</td>
          <td class="w-small"><a href="#"><img class="pdf-icon" src="https://cdn-icons-png.flaticon.com/512/337/337946.png" width="20"/></a></td>
        </tr>
      `;
    tbody.innerHTML += row;
  }
}

function renderPagination(
  containerId,
  data,
  currentPage,
  rowsPerPage,
  onPageChange
) {
  const pagination = document.getElementById(containerId);
  pagination.innerHTML = "";

  const totalPages = Math.ceil(data.length / rowsPerPage);

  const createButton = (
    page,
    label = null,
    disabled = false,
    isActive = false,
    isHTML = false
  ) => {
    const btn = document.createElement("button");

    if (isHTML) {
      btn.innerHTML = label;
    } else {
      btn.textContent = label || page;
    }

    btn.classList.add("page-link");
    if (disabled) btn.disabled = true;
    if (isActive) btn.classList.add("active");

    btn.addEventListener("click", () => onPageChange(page));

    return btn;
  };

  // Prev button
  pagination.appendChild(
    createButton(
      currentPage - 1,
      '<i class="bi bi-chevron-left"></i>',
      currentPage === 1,
      false,
      true
    )
  );

  // Always show first page
  pagination.appendChild(createButton(1, "1", false, currentPage === 1));

  // Left side dots
  if (currentPage > 3) {
    const dots = document.createElement("span");
    dots.className = "page-dots";
    dots.textContent = "…";
    pagination.appendChild(dots);
  }

  // Middle pages
  const startPage = Math.max(2, currentPage - 1);
  const endPage = Math.min(totalPages - 1, currentPage + 1);

  for (let i = startPage; i <= endPage; i++) {
    pagination.appendChild(createButton(i, i, false, currentPage === i));
  }

  // Right side dots
  if (currentPage < totalPages - 2) {
    const dots = document.createElement("span");
    dots.className = "page-dots";
    dots.textContent = "…";
    pagination.appendChild(dots);
  }

  // Last page
  if (totalPages > 1) {
    pagination.appendChild(
      createButton(totalPages, totalPages, false, currentPage === totalPages)
    );
  }

  // Next button
  pagination.appendChild(
    createButton(
      currentPage + 1,
      '<i class="bi bi-chevron-right"></i>',
      currentPage === totalPages,
      false,
      true
    )
  );
}

document.addEventListener("DOMContentLoaded", () => {
  // Bảng 1
  function handlePageChange1(page) {
    currentPage1 = page;
    renderTable("table1", data1, currentPage1, rowsPerPage1);
    renderPagination(
      "pagination1",
      data1,
      currentPage1,
      rowsPerPage1,
      handlePageChange1
    );
  }

  renderTable("table1", data1, currentPage1, rowsPerPage1);
  renderPagination(
    "pagination1",
    data1,
    currentPage1,
    rowsPerPage1,
    handlePageChange1
  );

  function handlePageChange2(page) {
    currentPage2 = page;
    renderTable("table2", data2, currentPage2, rowsPerPage2);
    renderPagination(
      "pagination2",
      data2,
      currentPage2,
      rowsPerPage2,
      handlePageChange2
    );
  }

  renderTable("table2", data2, currentPage2, rowsPerPage2);
  renderPagination(
    "pagination2",
    data2,
    currentPage2,
    rowsPerPage2,
    handlePageChange2
  );
});
